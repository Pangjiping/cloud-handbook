# **Git的基本概念**

## **Git的工作流程**

一般的工作流程如下：
* 克隆Git资源作为工作目录
* 在克隆的资源上添加或修改文件
* 如果其他人修改了，你可以更新资源
* 在提交前查看修改
* 提交修改
* 在修改完成后，如果发现错误，可以撤回提交并再次修改并提交

![img](https://www.runoob.com/wp-content/uploads/2015/02/git-process.png)

<br>

## **Git的基本概念**

* **工作区**: 在电脑里面能看到的目录
* **暂存区**: 英文叫stage或者index。一般存放在git目录下的index文件（.git/index）中，所以我们把暂存区也有时叫做索引index。
* **版本库**: 工作区有一个隐藏目录.git，这个不算工作区，而是git版本库。

工作区、暂存区、版本库之间的关系示意图如下所示：

![img](https://img2022.cnblogs.com/blog/2794988/202210/2794988-20221005163151525-1882067151.png)

* 图中左侧为工作区，右侧为版本库。在版本库中标记为index的区域是暂存区（stage，index），被标记为master的是master分支所代表的目录树。
* 图中我们可以看到此时"HEAD"是实际指向master分支的一个游标。所以图示的命令中出现的HEAD的地方可以用master来替换。
* 图中的objects标识的区域为Git的对象库，实际位于".git/objects"目录下，里面包含了创建的各种对象以及内容。
* 当工作区修改（或新增）的文件执行`git add`命令时，暂存区的目录树被更新，同时工作区修改（或新增）的文件内容被写入到对象库中的一个新的对象中，而该对象的ID被记录在暂存区的文件索引中。
* 当执行提交操作`git commit`时，暂存区的目录树写到版本库中，master分支会做相应的更新。即master指向的目录树就是提交时暂存区的目录树。
* 当执行`git reset HEAD`命令时，暂存区的目录树会被充血，被master分之指向的目录树所替换，但是工作区不受影响。
* 当执行`git rm --cached <file>`命令时，会直接从暂存区删除文件，工作区则不做出改变。
* 当执行`git checkout .`或者`git checkout -- <file>`命令时，会用暂存区全部或指定的文件替换工作区的文件。这个操作很危险，会清除工作区中未添加到暂存区的改动。
* 当执行`git checkout HEAD .`或者`git checkout HEAD <file>`命令时，会用HEAD指向master分支中的全部或者部分文件替换暂存区以及工作区中的文件。这个命令也是极具危险性的，因为不但会清除工作区中未提交的改动，也会清除暂存区中未提交的改动。

<br>

## **Reference**
* https://www.runoob.com/git/git-workflow.html